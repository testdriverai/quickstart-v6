version: 6.0.0
session: sourceandsummitv6testing
steps:
  # Sample PROVISION script
  # Runs ONCE when your VM is created
  # to run other scripts before a test, see prerun.yaml
  # to run scripts after a test, see postrun.yaml
  # Docs for exec command: https://docs.testdriver.ai/commands/exec
  # Docs for lifecycle scripts: https://docs.testdriver.ai/guide/lifecycle
  - prompt: "Provision"
    commands:
      - command: exec
        lang: pwsh
        # this script will pull down files from Google drive or a github repo to add to the vm during provisioning
        code: |
          # Google Drive file ID from the shared link
          $fileId = "1G-FEUF9AoC8cw6O1DwZSfcHl6peZDuHz"

          # Desired filename (change if you want something custom)
          $outputFileName = "image.png"

          # Output path in Downloads folder
          $downloadsPath = [Environment]::GetFolderPath("UserProfile") + "\Desktop"
          $outputFilePath = Join-Path $downloadsPath "$outputFileName"

          # Construct the Google Drive download URL
          $downloadUrl = "https://drive.google.com/uc?export=download&id=$fileId"

          # Perform the download
          Invoke-WebRequest -Uri $downloadUrl -OutFile $outputFilePath

          Write-Output "File downloaded to: $outputFilePath"

          exit
